<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tweet Assistant</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://fonts.googleapis.com/css?family=Poppins"
    />
    <head>
      <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
      <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    </head>
    <script src="./static/js/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <link
      href="./static/css/custom.css"
      rel="stylesheet"
      type="text/css"
      media="all"
    />
    <script type="text/javascript" src="https://combinatronics.com/datopian/dashboard-js/master/build/static/js/main.js"></script>
    <script src="path/to/chartjs/dist/Chart.js"></script>
    <style></style>
  </head>
  <body>
    <header>
      <nav
        class="navbar navbar-expand-lg navbar-light fixed-top scrolling-navbar double-nav justify-content-between"
      >
        <a class="navbar-brand heading" href="#">
          <img
            src="./static/img/logo.png"
            width="35"
            height="35"
            class="d-inline-block align-center"
            alt=""
          />
          Company Intelligence
          </a>
        <h2>Dorai's profile</h3>
        <form class="form-inline">
          <button class="btn btn-light mr-1" type="button">Sign In</button>
          <button class="btn btn-light" type="button">Register</button>
        </form>
      </nav>
    </header>
    <main>
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="row " style="margin: 5px 5px 5px 5px;">
            <div class="row row-cols-1 row-cols-md-2">
              <div class="col">
                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row no-gutters">
                    <div class="col-md-4">
                      <img src="./static/img/followers.jpeg" class="card-img" alt="..." style="height: 100px;">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <h5 class="card-title">Followers</h5>
                        <p class="card-text">11138</p>
                    
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row no-gutters">
                    <div class="col-md-4">
                      <img src="./static/img/tweet.png" class="card-img" alt="..." style="height: 100px;">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <h5 class="card-title">Tweets Collected</h5>
                        <p class="card-text">789</p>
              
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col mb-4">
                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row no-gutters">
                    <div class="col-md-4">
                      <img src="./static/img/hashtag.png" class="card-img" alt="..." style="height: 99px;">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <h5 class="card-title">Hashtags Collected</h5>
                        <p class="card-text">256</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col mb-4">
                <div class="card mb-3" style="max-width: 540px;">
                  <div class="row no-gutters">
                    <div class="col-md-4">
                      <img src="./static/img/mention.jpeg" class="card-img" alt="..." style="height: 99px; width: 100px;">
                    </div>
                    <div class="col-md-8">
                      <div class="card-body">
                        <h5 class="card-title">Mentions Collected</h5>
                        <p class="card-text">93</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>  
          </div>
          
          <div class="row ">
            <div class="card" style="width: 100%;">
              <canvas id="myChart" width="100" height="50"></canvas>
            </div>
            
          </div>
          <div class="row">
            <div class="card" style="width: 100%;">
              <div class="card-body">
                <div class="card-title">Top Tweets</div>
                <div class="card-body">
                  <table class="border--round table--alternate-row table-responsive table" id="tweets_table">
                    <thead id="tweets_thead">
                    </thead>
                    <tbody id="tweets_tbody" >
                    </tbody>
                  </table>  
                </div>
              </div>
            </div>
            
          
          </div>
          <div class="row">
            <div class="col-lg-6 mb-4 ml-0">
              <div class="card">
                  <div class="card-body">
                    <div class="card-title">Top Hashtags</div>
                    <div class="card-body">
                      <table class="border--round table--alternate-row table-responsive table" id="hashtags_table">
                        <thead id="hashtags_thead">
                        </thead>
                        <tbody id="hashtags_tbody" >
                        </tbody>
                      </table>  
                    </div>
                  </div>
              </div>
          </div>
          <div class="col-lg-6 mb-4 mr-0">
              <div class="card">
                  

                  <div class="card-body">
                    <div class="card-title">Mentions</div>
                    <div class="card-body">
                      <table class="border--round table--alternate-row table-responsive table" id="mentions_table">
                        <thead id="mentions_thead">
                        </thead>
                        <tbody id="mentions_tbody" >
                        </tbody>
                      </table>  
                    </div>
                  </div>
              </div>
          </div>
          </div>
        </div>
        <div class="col-md-2"></div>
      </div>
 
    </main>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/b-1.5.4/b-html5-1.5.4/b-print-1.5.4/datatables.min.css" />
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.18/b-1.5.4/b-html5-1.5.4/b-print-1.5.4/datatables.min.js"></script>    
  </body>
  <script>
    var ctx = document.getElementById("myChart").getContext("2d");
    get_tweets([]);
    get_hashtags([]);
    get_mentions([]);
    var data = {
      labels: ["1st day", "2nd day", "3rd day", "4th day"],
      datasets: [
          {
              label: "Tweets",
              backgroundColor: "rgba(66, 133, 244)",
              data: [3,7,4,10]
        },
        {
            label: "Likes",
            backgroundColor: "rgba(219, 68, 55)",
            data: [4,3,5,6]
        },
        {
            label: "Retweets",
            backgroundColor: "rgba(15, 157, 88)",
            data: [7,2,6,11]
        },
        {
        barPercentage: 0,
        barThickness: 1,
        maxBarThickness: 1,
        minBarLength: 0,
        }
      ]
    };

    var myBarChart = new Chart(ctx, {
      type: 'bar',
      data: data,
      options: {
        barValueSpacing: 15,
        scales: {
            yAxes: [{
                ticks: {
                    min: 0,
                    stepSize:8,
                }
            }]
        }
      }
    });

    function initialize_table(op) {
      var target;
      if (op == "hashtag") {
        target = [1];
      } else if (op == "tweets") {
        target = [1, 2, 3];
      } else if (op == "mentions") {
        target = [1];
      } else {  
        target = [];
      } // $.fn.dataTable.moment("ddd, DD MMM Y HH :mm:ss");
      if (op == "terms") {
        var order = []
      } else {
        var order = [
          [1, "desc"]
        ];
      }
      $('#' + op + '_table').DataTable({
        dom: 'frtipB',
        autoWidth: true,
        searching: false,
        info: false,
        "order": order,
        "pageLength": 10,
        paging: false,
        "bPaginate": false,
        "bLengthChange": false,
        columnDefs: [
        {
          "className": "dt-right",
          "targets": target
        }

        ],
        buttons: [{
          text: 'More...',
          action: function(e, dt, node, config) {
            var url = host + "/tweets?id=" + encodeURIComponent(getUrlParameter('id')) + "&op=" + op;
            window.open(url);
          }
        }]
      });
    }
    function get_tweets(data) {
      // console.log(data);
      var text = "";
      var tweet_table_html = "";
      var thead = "<tr><th>Text</th><th>Retweets</th><th>Favourites</th><th>Datetime</th></tr>";
      /*for (var i = data.length - 1; i >= 0; i--) {
        if (data[i]["retweeted_status"] == 0) {
          tweet_table_html += "<tr><td><a href='https://twitter.com/"+ data[i]["screen_name"] +"/statuses/" + data[i]["id_str"] + "' target='_blank' style='padding-left: 0px;'>" + data[i]["full_text"].trim() + "</a></td>" + "<td>" + data[i]["retweet_count"].toString() +
            "</td><td>" +
            data[i]["favorite_count"].toString() +
            "</td><td>" + data[i]["created_at"].replace("T", " "); + "</td></tr>";
        } else {
          tweet_table_html += "<tr><td><a href='https://twitter.com/"+ data[i]["screen_name"] +"/statuses/" + data[i]["id_str"] + "' target='_blank' style='padding-left: 0px;'>RT: " + data[i]["full_text"].trim() + "</a></td>" + "<td>" + data[i]["retweet_count"].toString() +
            "</td><td>" + data[i]["favorite_count"].toString() +
            "</td><td>" + data[i]["created_at"].replace("T", " "); + "</td></tr>";
        }
        text += data[i]["full_text"] + " ";
      }*/
      $("#tweets_thead").html(thead);
      $("#tweets_tbody").html(tweet_table_html);
      initialize_table("tweets");
    }

    function get_hashtags(data){
      var thead = "<tr><th>Hashtags</th><th>Count</th></tr>";
      var tweet_table_html = "";
    // console.log(toLowerCase(data));
    // set_title(data.length);
    // var dat = sortByFrequency(toLowerCase(data));

      for (var i = 0; i < data.length; i++) {
        tweet_table_html += "<tr><td>" + "<a href='https://twitter.com/search?q=%23" + encodeURIComponent(data[i][0]) + "' target='_blank'>"+ data[i][0] +"</a></td><td>" + data[i][1] + "</td></tr>";
      }
      $("#hashtags_thead").html(thead);
      $("#hashtags_tbody").html(tweet_table_html);
      initialize_table("hashtags");
  

    }
    function get_mentions(data) {
    var thead = "<tr><th>Mentions</th><th>Count</th></tr>";
    $("#mentions_thead").html(thead);
    var tweet_table_html = "";
    // set_title(data.length);
    // var dat = sortByFrequency(data);

    for (var i = 0; i < data.length; i++) {
      tweet_table_html += "<tr><td><a href='https://twitter.com/" + data[i][0] + "' target='_blank'>" + data[i][0] + "</a></td><td>" + data[i][1] + "</td></tr>";
    }
    $("#mentions_tbody").html(tweet_table_html);
    initialize_table("mentions");
  }
  </script>
</html>
